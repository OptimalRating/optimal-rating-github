"use strict";(()=>{var e={};e.id=747,e.ids=[747,888],e.modules={8919:(e,t,r)=>{r.r(t),r.d(t,{config:()=>$,default:()=>S,getServerSideProps:()=>y,getStaticPaths:()=>E,getStaticProps:()=>U,reportWebVitals:()=>M,routeModule:()=>z,unstable_getServerProps:()=>F,unstable_getServerSideProps:()=>L,unstable_getStaticParams:()=>T,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>P});var i={};r.r(i),r.d(i,{default:()=>j,getServerSideProps:()=>x});var o=r(6505),a=r(9143),n=r(7517),l=r(2968),s=r(7228),d=r(997),c=r(6689),u=r(3592),_=r(3985),m=r(1259),p=r(3519),f=r(505),h=r(6216),v=r(491),O=r.n(v),g=r(6210),b=r(2703),C=r(6342),D=r.n(C),N=r(3108);(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}();let x=async({query:e})=>{let t=await (0,f.Yu)({url:`${b.lp}surveys/detail/${e.id}`}),r=await (0,f.oM)(),i=(0,m.U2)(t,"result.set",{}),o=`${b.cO}survey/${e.countryCode}-${i.id}.png`,a=`${e.countryCode}/survey/${i.slug}`;return{props:{query:e,res:t,resLan:r,metaTags:{"og:title":i.title||"Survey","og:description":i.description||"Overview of above survey","og:image":o,"og:url":a}}}},j=({query:e,res:t,resLan:r})=>{let[i,o]=(0,c.useState)(!1),[a,n]=(0,c.useState)(null);(0,c.useEffect)(()=>{(0,f.mh)(r),h.$.setHeader("country",(0,m.NI)())},[r]);let{data:l,loading:s,refresh:v}=(0,p.XD)({url:`${b.lp}home-special-survey`,key:"specialSurvey"}),{t:C}=Object(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e}())(),x=(0,u.useRouter)(),j=e=>{(0,f.qC)({url:`${b.lp}submitVote/${e}`,data:{choice_id:a?.id}}).then(e=>{Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).success({message:C("msg.success_mark")}),o(!1),n(!1),v()}).catch(e=>{"msg.info.not_approved"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:C("lbl.cancel_vote"),content:C("msg.must_approved"),onOk:()=>x.push(`/${(0,m.NI)()}/profile`)}):"msg.info.country_vote_notallowed"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:C("msg.error_country_vote_notallowed")}):Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:C("msg.error_mark")}),o(!1)})},S=(e,t)=>{o(!0),Promise.all(t.map(t=>(0,f.Yu)({url:`${b.lp}cancelVote/${e}/${t}`}))).then(()=>{j(e)}).catch(()=>{o(!1)})},U=e=>{o(!0);let t=e?.id;Promise.all(e?.choices.map(r=>f.Yu({url:`${b.lp}checkVote/${t}/${r.id}`}).then(t=>({surveyId:e?.id,response:t})).catch(()=>({surveyId:e?.id,response:null})))).then(e=>{let r=e.filter(e=>e.response);if(r.length>0){o(!1);let e=r[0].surveyId;Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:C("lbl.cancel_vote"),content:C("lbl.survey_already_voted"),onOk:()=>S(e,r.map(e=>e.response.result.set.choice_id))})}else j(t)})},E=(0,m.U2)(t,"result.set"),y=(0,m.oU)(E.choices,!0),$=(0,c.createRef)(),M=[{name:"A",value:400},{name:"B",value:300},{name:"C",value:300},{name:"D",value:200}],[P,w]=(0,c.useState)(!1);return d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{spinning:s,children:(0,d.jsxs)(g.Z,{children:[(0,d.jsxs)(D(),{children:[d.jsx("meta",{charSet:"utf-8"}),d.jsx("title",{children:E.title})]}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:d.jsx(({survey:e})=>d.jsx(O(),{href:`/${(0,m.NI)()}/special/${e.slug}`,children:d.jsx("a",{children:e.title})}),{survey:E}),bordered:!1,children:d.jsx(_.HY,{isEmpty:!E,children:(0,d.jsxs)("div",{children:[d.jsx(_.wW,{data:y,selected:a,onClick:e=>{n(e)},isSpecial:!0,chartImageName:`${(0,m.NI)()}-${E&&E.id}.png`,url:`/${(0,m.NI)()}/special/${E&&E.slug}`}),(0,d.jsxs)("div",{className:"mt-20 pl-10",children:[(0,d.jsxs)("div",{className:"d-flex",children:[d.jsx(_.y3,{showChild:!0,children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{type:"primary",disabled:!a,onClick:()=>U(E),loading:i,children:C("lbl.vote")})}),d.jsx("p",{className:"ml-auto",style:{color:"#3a99ab",marginRight:"5px",marginTop:"4px"},children:C("msg.display")}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{style:{cursor:"pointer",marginRight:"2px"},width:35,height:35,children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{data:M,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:15,fill:"#8884d8",label:!0,onClick:()=>{w(!0)},children:M.map((e,t)=>d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{fill:["#ff7300","#ffbf00","#0088fe","#00c49f"][t]},`cell-${t}`))})}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:C("msg.modal_title"),open:P,onOk:()=>{w(!1)},onCancel:()=>{w(!1)},width:700,children:d.jsx(N.Z,{data:y,ref:$,chartImageName:`${(0,m.NI)()}-${E&&E.id}.png`})}),d.jsx(_.mB,{title:E&&E.title||"",url:`${b.cO}survey/
                        ${(0,m.NI)()}-${E&&E.id}.png`,pageUrl:`null/${(0,m.NI)()}/special/${E&&E.slug||""}`,chartRef:""})]}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{}),d.jsx(_.HW,{data:(0,m.U2)(E,"comments",[]),surveyId:E&&E.id})]})]})})},E&&E.id)]})})},S=(0,n.l)(i,"default"),U=(0,n.l)(i,"getStaticProps"),E=(0,n.l)(i,"getStaticPaths"),y=(0,n.l)(i,"getServerSideProps"),$=(0,n.l)(i,"config"),M=(0,n.l)(i,"reportWebVitals"),P=(0,n.l)(i,"unstable_getStaticProps"),w=(0,n.l)(i,"unstable_getStaticPaths"),T=(0,n.l)(i,"unstable_getStaticParams"),F=(0,n.l)(i,"unstable_getServerProps"),L=(0,n.l)(i,"unstable_getServerSideProps"),z=new o.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/[countryCode]/special/[id]",pathname:"/[countryCode]/special/[id]",bundlePath:"",filename:""},components:{App:s.default,Document:l.default},userland:i})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[620,785,769,228,221],()=>r(8919));module.exports=i})();