"use strict";(()=>{var e={};e.id=553,e.ids=[553,888],e.modules={872:(e,t,r)=>{r.r(t),r.d(t,{config:()=>E,default:()=>U,getServerSideProps:()=>N,getStaticPaths:()=>C,getStaticProps:()=>D,reportWebVitals:()=>x,routeModule:()=>y,unstable_getServerProps:()=>M,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>S});var a={};r.r(a),r.d(a,{default:()=>b,getServerSideProps:()=>g});var o=r(6505),i=r(9143),n=r(7517),l=r(2968),s=r(7228),d=r(997),c=r(6689),u=r(3592),_=r(3985),m=r(1259),p=r(3519),h=r(505),f=r(6210),O=r(2703),v=r(3108);(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'pica'");throw e.code="MODULE_NOT_FOUND",e}();let g=async({query:e})=>({props:{query:e,res:await (0,h.oM)()}}),b=e=>{let[t,r]=(0,c.useState)(!1),[a,o]=(0,c.useState)(null),{id:i}=(0,u.useRouter)().query,{data:n,loading:l,refresh:s}=(0,p.XD)({url:`${O.lp}home-special-survey/${i}`,key:"specialSurvey"});(0,c.useEffect)(()=>{(0,h.mh)(e.res)},[e.match,e.res]);let{t:g}=Object(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e}())(),b=(0,c.createRef)(),U=(0,m.oU)((0,m.U2)(n,"result.set.choices",[]),!0),D=(0,u.useRouter)(),C=`${(0,m.NI)()}-${(0,m.U2)(n,"result.set.id")}.png`,[N,E]=(0,c.useState)(!1),[x,S]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{let e=new Image;e.src=`${O.cO}survey/${C}`,e.crossOrigin="Anonymous",e.onload=async()=>{let t=document.createElement("canvas"),r=document.createElement("canvas");t.width=e.width,t.height=e.height,r.width=200,r.height=200,t.getContext("2d").drawImage(e,0,0);try{let e=Object(function(){var e=Error("Cannot find module 'pica'");throw e.code="MODULE_NOT_FOUND",e}())();await e.resize(t,r),r.toBlob(e=>{let t=URL.createObjectURL(e);S(t)},"image/jpeg")}catch(e){console.error("Image resizing error:",e)}}})()},[C]);let j=[{name:"A",value:400},{name:"B",value:300},{name:"C",value:300},{name:"D",value:200}],w=()=>{(0,h.qC)({url:`${O.lp}submitVote/${(0,m.U2)(n,"result.set.id")}`,data:{choice_id:a.id}}).then(e=>{Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).success({message:g("msg.success_mark")}),r(!1),o(!1),s()}).catch(e=>{"msg.info.not_approved"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:g("lbl.cancel_vote"),content:g("msg.must_approved"),onOk:()=>D.push(`/${(0,m.NI)()}/profile`)}):"msg.info.country_vote_notallowed"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:g("msg.error_unauthorized_country")}):Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:g("msg.error_mark")}),r(!1)})},M=e=>{r(!0),Promise.all(e.map(e=>(0,h.Yu)({url:`${O.lp}cancelVote/${(0,m.U2)(n,"result.set.id")}/${e}`}))).then(()=>{w()}).catch(()=>{r(!1)})};return d.jsx(f.Z,{children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{spinning:l,children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:(0,m.U2)(n,"result.set.title"),bordered:!1,children:d.jsx(_.HY,{isEmpty:!(0,m.U2)(n,"result.set"),children:(0,d.jsxs)("div",{children:[d.jsx(_.wW,{data:U,selected:a,onClick:e=>{o(e)},isSpecial:!0}),(0,d.jsxs)("div",{className:"mt-20 pl-10",children:[(0,d.jsxs)("div",{className:"d-flex",children:[d.jsx(_.y3,{showChild:!0,children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{type:"primary",disabled:!a,onClick:()=>{r(!0),Promise.all(U.map(e=>(0,h.Yu)({url:`${O.lp}checkVote/${(0,m.U2)(n,"result.set.id")}/${e.id}`}).then(e=>e).catch(()=>null))).then(e=>{let t=e.filter(e=>e);t.length>0?(r(!1),Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:g("lbl.cancel_vote"),content:g("lbl.survey_already_voted"),onOk:()=>M(t.map(e=>e.result.set.choice_id))})):w()})},loading:t,children:g("lbl.vote")})}),d.jsx("p",{className:"ml-auto",style:{color:"#3a99ab",marginRight:"5px",marginTop:"4px"},children:g("msg.display")}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{style:{cursor:"pointer",marginRight:"2px"},width:35,height:35,children:d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{data:j,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:15,fill:"#8884d8",label:!0,onClick:()=>{E(!0)},children:j.map((e,t)=>d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Cell,Pie,PieChart!=!recharts'");throw e.code="MODULE_NOT_FOUND",e}()),{fill:["#ff7300","#ffbf00","#0088fe","#00c49f"][t]},`cell-${t}`))})}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:g("msg.modal_title"),open:N,onOk:()=>{E(!1)},onCancel:()=>{E(!1)},width:700,children:d.jsx(v.Z,{data:U,ref:b,chartImageName:C})}),d.jsx(_.mB,{title:(0,m.U2)(n,"result.set.title")||"",url:x,pageUrl:`null/${(0,m.NI)()}/special/${(0,m.U2)(n,"result.set.slug")||""}`,chartRef:""})]}),d.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{}),d.jsx(_.HW,{data:(0,m.U2)(n,"result.set.comments",[]),surveyId:(0,m.U2)(n,"result.set.id")})]})]})})})})})},U=(0,n.l)(a,"default"),D=(0,n.l)(a,"getStaticProps"),C=(0,n.l)(a,"getStaticPaths"),N=(0,n.l)(a,"getServerSideProps"),E=(0,n.l)(a,"config"),x=(0,n.l)(a,"reportWebVitals"),S=(0,n.l)(a,"unstable_getStaticProps"),j=(0,n.l)(a,"unstable_getStaticPaths"),w=(0,n.l)(a,"unstable_getStaticParams"),M=(0,n.l)(a,"unstable_getServerProps"),P=(0,n.l)(a,"unstable_getServerSideProps"),y=new o.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/[countryCode]/survey/special/[id]/details",pathname:"/[countryCode]/survey/special/[id]/details",bundlePath:"",filename:""},components:{App:s.default,Document:l.default},userland:a})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[620,785,769,228,221],()=>r(872));module.exports=a})();