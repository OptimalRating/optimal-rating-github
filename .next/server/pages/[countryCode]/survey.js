"use strict";(()=>{var e={};e.id=154,e.ids=[154,888],e.modules={1022:(e,t,r)=>{r.r(t),r.d(t,{config:()=>x,default:()=>U,getServerSideProps:()=>C,getStaticPaths:()=>j,getStaticProps:()=>F,reportWebVitals:()=>w,routeModule:()=>z,unstable_getServerProps:()=>T,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>M,unstable_getStaticPaths:()=>L,unstable_getStaticProps:()=>y});var n={};r.r(n),r.d(n,{default:()=>E,getServerSideProps:()=>g});var i=r(6505),o=r(9143),a=r(7517),d=r(2968),c=r(7228),_=r(997),l=r(6689),s=r(5811),u=r(3985),m=r(9584),O=r.n(m);(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=DeleteOutlined,PlusOutlined!=!@ant-design/icons'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'react-quill/dist/quill.snow.css'");throw e.code="MODULE_NOT_FOUND",e}();let h=O()(()=>Promise.resolve().then(function(){var e=Error("Cannot find module 'react-quill'");throw e.code="MODULE_NOT_FOUND",e}),{loadableGenerated:{modules:["views/Survey/Create/Choices.js -> react-quill"]},ssr:!1});function f({fields:e=[],add:t,remove:r,t:n,initial:i=3,form:o}){let[a,d]=(0,l.useState)(0);return(0,_.jsxs)("div",{children:[_.jsx("div",{className:"SurveyChoices",children:e&&e.map((e,t)=>(0,_.jsxs)("div",{className:"SurveyChoice",style:{padding:"20px"},children:[(0,_.jsxs)("div",{className:"ChoiceImage",children:[_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{name:[e.name,"id"],fieldKey:[e.fieldKey,"id"],initialValue:null,className:"d-none",children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{label:" ",name:[e.name,"choice_image"],fieldKey:[e.fieldKey,"choice_image"],rules:[{required:!0,message:n("msg.candidate_image_required")}],children:_.jsx(u.gq,{})}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{name:[e.name,"marking"],fieldKey:[e.fieldKey,"marking"],rules:[{validator:async(e,t)=>{if(!t||0===t)return Promise.reject(Error(n("msg.rating_required")))}}],children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{})})]}),(0,_.jsxs)("div",{className:"ChoiceInfo",children:[_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{className:"mb-20",label:n("lbl.name"),name:[e.name,"choice_title"],fieldKey:[e.fieldKey,"choice_title"],rules:[{required:!0,message:n("msg.required_title")}],children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{label:n("lbl.description"),name:[e.name,"choice_description"],fieldKey:[e.fieldKey,"choice_description"],rules:[{required:!0,message:n("msg.required_description")},{validator:async(e,t)=>{if(t?.replace(/(<([^>]+)>)/gi,"").length>1e3)return Promise.reject(Error(n("msg.error_exceed_max_character")))}}],children:_.jsx(h,{value:o.getFieldValue(["choices",e.name,"choice_description"])||"",onChange:(t,r,n,i)=>{let a=t||"",c=(o.getFieldValue("choices")||[]).map((t,r)=>r===e.name?{...t,choice_description:a,choice_description_length:i.getLength()-1}:t??{});o.setFieldsValue({choices:c}),d(i.getLength()-1)}})})]}),t>i&&_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{icon:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=DeleteOutlined,PlusOutlined!=!@ant-design/icons'");throw e.code="MODULE_NOT_FOUND",e}()),{}),onClick:()=>r(e.name)})]},e.key))}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{}),_.jsx("div",{className:"text-center",children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Divider,Form,Input,Rate!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{icon:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=DeleteOutlined,PlusOutlined!=!@ant-design/icons'");throw e.code="MODULE_NOT_FOUND",e}()),{}),onClick:()=>{let e=o.getFieldValue("choices")||[];o.setFieldsValue({choices:[...e,{id:null,choice_image:"",marking:null,choice_title:"",choice_description:""}]})},children:n("lbl.new_choice")})})]})}var p=r(505),D=r(4931),v=r(6210),b=r(2703),N=r(3592);(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'i18next'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=PlusOutlined!=!@ant-design/icons'");throw e.code="MODULE_NOT_FOUND",e}();let g=async({query:e})=>({props:{query:e,res:await (0,p.oM)()}}),E=e=>{let{t}=Object(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e}())(),[r]=Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).useForm(),[n,i]=(0,l.useState)(!1),[o,a]=(0,l.useState)(null),d=(0,N.useRouter)();(0,l.useEffect)(()=>{(0,p.mh)(e.res),r.setFieldsValue({choices:[{id:null,choice_image:"",marking:null,choice_title:"",choice_description:""},{id:null,choice_image:"",marking:null,choice_title:"",choice_description:""},{id:null,choice_image:"",marking:null,choice_title:"",choice_description:""}]})},[r,e.res,t]);let{asPath:c}=d,m=c.split("/")[1];(0,l.useEffect)(()=>{e.res&&(Object(function(){var e=Error("Cannot find module 'i18next'");throw e.code="MODULE_NOT_FOUND",e}())(m,"translation",e.res,!0,!0),Object(function(){var e=Error("Cannot find module 'i18next'");throw e.code="MODULE_NOT_FOUND",e}())(m))},[e.res,m]);let O=async e=>{i(!0);for(let t=0;t<e.choices.length;t++){let r=e.choices[t];e.choices[t].choice_image=await (0,D.Z)(r.choice_image,"sa")}e.country_code=null,(0,p.qC)({url:`${b.lp}surveys`,data:{...e,type:"normal"}}).then(e=>{i(!1),200==Number(e?.code)&&(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).success({message:t("msg.success_survey_add")}),d.push("/"))}).catch(e=>{"msg.error_not_allowed_country"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:t("msg.error_unauthorized_country")}):Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:t("msg.error_survey_add")}),i(!1)})};return _.jsx(v.Z,{children:_.jsx("div",{className:"Survey",children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:t("lbl.add_survey"),bordered:!1,children:(0,_.jsxs)(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{form:r,layout:"vertical",onFinish:O,children:[_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{className:"mb-20",name:"category_id",label:t("lbl.select_category"),style:{maxWidth:600},rules:[{required:!0,message:t("msg.required_category")}],children:_.jsx(s.yW,{newCategory:o})}),_.jsx(u.cz,{setNewCategory:a}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{name:"title",label:t("survey_title"),rules:[{required:!0,message:t("msg.required_title")}],style:{maxWidth:600},children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),(0,_.jsxs)(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[" ",t("lbl.choices")," "]}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).List,{name:"choices",children:(e,{add:n,remove:i})=>_.jsx(f,{fields:e,add:n,remove:i,t,initial:3,form:r})}),_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).Item,{children:_.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Form,Input,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{type:"primary",htmlType:"submit",loading:n,children:t("save")})})]})})})})},U=(0,a.l)(n,"default"),F=(0,a.l)(n,"getStaticProps"),j=(0,a.l)(n,"getStaticPaths"),C=(0,a.l)(n,"getServerSideProps"),x=(0,a.l)(n,"config"),w=(0,a.l)(n,"reportWebVitals"),y=(0,a.l)(n,"unstable_getStaticProps"),L=(0,a.l)(n,"unstable_getStaticPaths"),M=(0,a.l)(n,"unstable_getStaticParams"),T=(0,a.l)(n,"unstable_getServerProps"),I=(0,a.l)(n,"unstable_getServerSideProps"),z=new i.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/[countryCode]/survey",pathname:"/[countryCode]/survey",bundlePath:"",filename:""},components:{App:c.default,Document:d.default},userland:n})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[620,785,769,228,221],()=>r(1022));module.exports=n})();