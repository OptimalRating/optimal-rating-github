"use strict";(()=>{var e={};e.id=575,e.ids=[575,888],e.modules={8420:(e,t,r)=>{r.r(t),r.d(t,{config:()=>C,default:()=>S,getServerSideProps:()=>U,getStaticPaths:()=>D,getStaticProps:()=>g,reportWebVitals:()=>E,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>M,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>x});var o={};r.r(o),r.d(o,{default:()=>b,getServerSideProps:()=>h});var i=r(6505),n=r(9143),a=r(7517),s=r(2968),d=r(7228),l=r(997),c=r(6689),u=r(3592),_=r(3985),m=r(1259),p=r(3519),f=r(505),v=r(6210),O=r(2703);(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}();let h=async({query:e})=>({props:{query:e,res:await (0,f.oM)()}}),b=e=>{let[t,r]=(0,c.useState)(!1),[o,i]=(0,c.useState)(null),{surveyId:n}=(0,u.useRouter)().query,{data:a,loading:s,refresh:d}=(0,p.XD)({url:`${O.lp}home-special-survey/${n}`,key:"specialSurvey"});(0,c.useEffect)(()=>{(0,f.mh)(res)},[e.match]);let{t:h}=Object(function(){var e=Error("Cannot find module 'react-i18next'");throw e.code="MODULE_NOT_FOUND",e}())(),b=(0,m.oU)((0,m.U2)(a,"result.set.choices",[]),!0),S=(0,u.useRouter)(),g=()=>{(0,f.qC)({url:`${O.lp}submitVote/${(0,m.U2)(a,"result.set.id")}`,data:{choice_id:o.id}}).then(e=>{Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).success({message:h("msg.success_mark")}),r(!1),i(!1),d()}).catch(e=>{"msg.info.not_approved"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:h("lbl.cancel_vote"),content:h("msg.must_approved"),onOk:()=>S.push(`/${(0,m.NI)()}/profile`)}):"msg.info.country_vote_notallowed"===e.message?Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:h("msg.error_unauthorized_country")}):Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).error({message:h("msg.error_mark")}),r(!1)})},D=e=>{r(!0),Promise.all(e.map(e=>(0,f.Yu)({url:`${O.lp}cancelVote/${(0,m.U2)(a,"result.set.id")}/${e}`}))).then(()=>{g()}).catch(()=>{r(!1)})};return l.jsx(v.Z,{children:l.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{spinning:s,children:l.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{title:(0,m.U2)(a,"result.set.title"),bordered:!1,children:l.jsx(_.HY,{isEmpty:!(0,m.U2)(a,"result.set"),children:(0,l.jsxs)("div",{children:[l.jsx(_.wW,{data:b,selected:o,onClick:e=>{i(e)},isSpecial:!0}),(0,l.jsxs)("div",{className:"mt-20 pl-10",children:[l.jsx(_.y3,{showChild:!0,children:l.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{type:"primary",disabled:!o,onClick:()=>{r(!0),Promise.all(b.map(e=>(0,f.Yu)({url:`${O.lp}checkVote/${(0,m.U2)(a,"result.set.id")}/${e.id}`}).then(e=>e).catch(()=>null))).then(e=>{let t=e.filter(e=>e);t.length>0?(r(!1),Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()).confirm({title:h("lbl.cancel_vote"),content:h("lbl.survey_already_voted"),onOk:()=>D(t.map(e=>e.result.set.choice_id))})):g()})},loading:t,children:h("lbl.vote")})}),l.jsx(Object(function(){var e=Error("Cannot find module '__barrel_optimize__?names=Button,Card,Divider,Modal,Spin,notification!=!antd'");throw e.code="MODULE_NOT_FOUND",e}()),{}),l.jsx(_.HW,{data:(0,m.U2)(a,"result.set.comments",[]),surveyId:(0,m.U2)(a,"result.set.id")})]})]})})})})})},S=(0,a.l)(o,"default"),g=(0,a.l)(o,"getStaticProps"),D=(0,a.l)(o,"getStaticPaths"),U=(0,a.l)(o,"getServerSideProps"),C=(0,a.l)(o,"config"),E=(0,a.l)(o,"reportWebVitals"),x=(0,a.l)(o,"unstable_getStaticProps"),N=(0,a.l)(o,"unstable_getStaticPaths"),M=(0,a.l)(o,"unstable_getStaticParams"),j=(0,a.l)(o,"unstable_getServerProps"),P=(0,a.l)(o,"unstable_getServerSideProps"),w=new i.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/[countryCode]/[surveyId]/details",pathname:"/[countryCode]/[surveyId]/details",bundlePath:"",filename:""},components:{App:d.default,Document:s.default},userland:o})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[620,785,769,228,221],()=>r(8420));module.exports=o})();